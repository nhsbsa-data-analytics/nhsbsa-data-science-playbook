<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" xml:lang="en-GB"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Analyse the data and create models to support the expected outputs.">

<title>NHSBSA Data Science Playbook</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<link href="../../../static/bsa-favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-178a1ff6d847f3aab19abff97b1b9300.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../../../site_libs/quarto-contrib/iconify-2.1.0/iconify-icon.min.js"></script>
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="https://www.nhsbsa.nhs.uk/" class="navbar-brand navbar-brand-logo">
    <img src="../../../static/NHSBSA logo.png" alt="NHS Business Services Authority" class="navbar-logo light-content">
    <img src="../../../static/NHSBSA logo.png" alt="NHS Business Services Authority" class="navbar-logo dark-content">
    </a>
  </div>
          <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Playbook Home Page</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-guidance" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Guidance</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-guidance">    
        <li>
    <a class="dropdown-item" href="../../../guidance/01-pre-pd/index.html">
 <span class="dropdown-text">Before the problem definition</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../guidance/02-pd/index.html">
 <span class="dropdown-text">Problem definition</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../guidance/03-analysis/index.html">
 <span class="dropdown-text">Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../guidance/04-wrap-up/index.html">
 <span class="dropdown-text">Initiative wrap up</span></a>
  </li>  
    </ul>
  </li>
</ul>
          <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.nhsbsa.nhs.uk/nhsbsa-statistics-and-data-science"> 
<span class="menu-text"><iconify-icon role="img" inline="" icon="mdi:house-outline" style="font-size: 1.5em;" aria-label="Icon house-outline from mdi Iconify.design set." title="Icon house-outline from mdi Iconify.design set."></iconify-icon> NHSBSA Data Science Home Page</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/nhsbsa-data-analytics"> 
<span class="menu-text"><iconify-icon role="img" inline="" icon="mdi:github" style="font-size: 1.5em;" aria-label="Icon github from mdi Iconify.design set." title="Icon github from mdi Iconify.design set."></iconify-icon> GitHub</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://twitter.com/nhsbsa"> 
<span class="menu-text"><iconify-icon role="img" inline="" icon="mdi:twitter" style="font-size: 1.5em;" aria-label="Icon twitter from mdi Iconify.design set." title="Icon twitter from mdi Iconify.design set."></iconify-icon> Twitter</span></a>
  </li>  
</ul>
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title">Analysis and modelling</h1>
        </a>     
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title d-none d-lg-block">Analysis and modelling</h1>
                  <div>
        <div class="description">
          Analyse the data and create models to support the expected outputs.
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta column-body">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Before the problem definition</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/01-pre-pd/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Before the problem definition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/01-pre-pd/pre-pd-steps/01-question-identified.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Question identified</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/01-pre-pd/pre-pd-steps/02-assign-critical-friend.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assign a Critical Friend</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/01-pre-pd/pre-pd-steps/03-develop-understanding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Develop understanding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/01-pre-pd/pre-pd-steps/04-customer-engagement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Customer engagement</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/01-pre-pd/pre-pd-steps/05-create-update-initiative-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Create/update initative resources</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Problem definition</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/02-pd/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Problem definition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/02-pd/pd-steps/01-writing-problem-definition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing the problem definition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/02-pd/pd-steps/02-customer-feedback.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Customer feedback</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/02-pd/pd-steps/03-refine-pd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Refine the problem definition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/02-pd/pd-steps/04-estimate-timescales.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Estimate the timescales</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/02-pd/pd-steps/05-problem-definition-sign-off.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Problem definition sign-off</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/03-analysis/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/03-analysis/analysis-steps/01-data-prep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data preparation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/03-analysis/analysis-steps/02-analysis-modelling.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Analysis and modelling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/03-analysis/analysis-steps/03-reporting-and-visuals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reporting and visuals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/03-analysis/analysis-steps/04-review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Review</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Initiative wrap up</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/04-wrap-up/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Initiative wrap up</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/04-wrap-up/wrap-up-steps/01-clean-up.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wrap up and clean your code</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/04-wrap-up/wrap-up-steps/02-review-documentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Review the documentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/04-wrap-up/wrap-up-steps/03-update-wiki.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Update the Wiki</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/04-wrap-up/wrap-up-steps/04-public-repository.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Make the repository public (if applicable)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/04-wrap-up/wrap-up-steps/05-future-work.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Consider potential future work</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../guidance/04-wrap-up/wrap-up-steps/06-follow-up.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Follow-up</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#selection-of-methods" id="toc-selection-of-methods" class="nav-link active" data-scroll-target="#selection-of-methods">Selection of methods</a></li>
  <li><a href="#application-of-methods" id="toc-application-of-methods" class="nav-link" data-scroll-target="#application-of-methods">Application of methods</a></li>
  <li><a href="#quality-assurance-qa" id="toc-quality-assurance-qa" class="nav-link" data-scroll-target="#quality-assurance-qa">Quality assurance (QA)</a></li>
  <li><a href="#useful-qa-resources" id="toc-useful-qa-resources" class="nav-link" data-scroll-target="#useful-qa-resources">Useful QA resources</a></li>
  <li><a href="#tools-used-in-analysis" id="toc-tools-used-in-analysis" class="nav-link" data-scroll-target="#tools-used-in-analysis">Tools used in analysis</a></li>
  <li><a href="#tips-for-effective-programming" id="toc-tips-for-effective-programming" class="nav-link" data-scroll-target="#tips-for-effective-programming">Tips for effective programming</a></li>
  <li><a href="#check-the-quality" id="toc-check-the-quality" class="nav-link" data-scroll-target="#check-the-quality">Check the quality</a></li>
  <li><a href="#rap-considerations" id="toc-rap-considerations" class="nav-link" data-scroll-target="#rap-considerations">RAP considerations</a></li>
  <li><a href="#useful-rap-resources" id="toc-useful-rap-resources" class="nav-link" data-scroll-target="#useful-rap-resources">Useful RAP resources</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-body" id="quarto-document-content">
<script>
  var a = document.createElement('a');
  var linkText = document.createTextNode("Skip to main content");
  a.appendChild(linkText);
  a.classList.add("skip");
  a.href = "#quarto-content";
  document.body.insertBefore(a, document.body.firstChild);
</script>





<p>In this step, we turn our data into insights. The work done here can vary. It can include statistical analysis, both modelled and descriptive, as well as more sophisticated Machine Learning (AI) – the choice being dependent on the output requirements of the customer. The output can be presented in the form of a report, a dashboard, or a slide deck.</p>
<section id="selection-of-methods" class="level2">
<h2 class="anchored" data-anchor-id="selection-of-methods">Selection of methods</h2>
<p>The analysis first requires an appropriate method that can provide the desired outputs.</p>
<ul>
<li>Create a short-list of methods that could be applicable to the problem.</li>
<li>Consider the pros and cons of each candidate method:
<ul>
<li>are there examples of this method being applied to the problem archetype?</li>
<li>will the available data support the method? If not, is it feasible to transform the data into a more suitable form?</li>
<li>will the tools available support the method?</li>
</ul></li>
<li>Decide which methods are best suited to the problem:
<ul>
<li>often the best method will be clear</li>
<li>sometimes you may need to try a small number of methods before deciding on the overall best one</li>
<li>get the opinion of your Critical Friend, or other team members</li>
</ul></li>
</ul>
<p>Keep notes of your decision-making and method trials for the final write-up of the initiative.</p>
</section>
<section id="application-of-methods" class="level2">
<h2 class="anchored" data-anchor-id="application-of-methods">Application of methods</h2>
<p>Apply the selected model(s) with <strong>RIGOUR</strong>; it should be <strong>R</strong>epeatable, <strong>I</strong>ndependent, <strong>G</strong>rounded in reality, <strong>O</strong>bjective, <strong>U</strong>ncertainty-managed, and <strong>R</strong>obust.</p>
<ul>
<li><strong>Repeatable</strong>: For an analytical process to be considered ‘valid’ it might reasonably be expected that for the same inputs and constraints the analysis produces the same outputs. It is important to note that different analysts will consider the analytical problem differently, potentially resulting in differing results, however if any one approach is repeated the results should be as expected.</li>
<li><strong>Independent</strong>: To produce analysis that is free of prejudice or bias. In doing so, care should be taken to appropriately balance the views across all stakeholders and experts.</li>
<li><strong>Grounded in reality</strong>: Quality analysis takes the commissioner and analyst on a journey as views and perceptions are challenged and connections are made between the analysis and its real consequences. Connecting with reality in this way guards against failing to properly grasp the context of the problem which is being analysed.</li>
<li><strong>Objective</strong>: Effective engagement and suitable challenge reduces potential bias and enables the commissioner and the analyst to be clear about the interpretation of the analytical results.</li>
<li><strong>Uncertainty-managed</strong>: Uncertainties have been identified, managed, and communicated throughout the analytical process.</li>
<li><strong>Robust</strong>: Provide the analytical result in the context of residual uncertainty and limitations to ensure it is used appropriately.</li>
</ul>
<p>See the internal Data Science Wiki for guides and links to resources on specific methods.</p>
</section>
<section id="quality-assurance-qa" class="level2">
<h2 class="anchored" data-anchor-id="quality-assurance-qa">Quality assurance (QA)</h2>
<p>Check your analysis thoroughly and often, not as a last step before delivery.</p>
<ul>
<li>Documentation is important because:
<ul>
<li>it allows us to transfer knowledge about the analysis</li>
<li>it keeps the analysis transparent</li>
<li>it provides instructions on how to use any interactive output</li>
</ul></li>
<li>Good analysis structure helps:
<ul>
<li>in avoiding errors</li>
<li>make it easier to check</li>
<li>maintain ongoing workflows</li>
<li>to re-use or re-purpose later</li>
</ul></li>
<li>Verify the outputs by:
<ul>
<li>testing your analysis, preferably in a repeatable and automated way</li>
<li>asking for peer review of all aspects, including code, text and decisions made</li>
</ul></li>
<li>Validate your analysis by:
<ul>
<li>checking outputs are reasonable for a wide range of inputs</li>
<li>comparing to existing data</li>
<li>asking a subject-matter expert to review (the earlier the better)</li>
</ul></li>
<li>Be open about uncertainty caused by data and assumptions and communicate this clearly to stakeholders.</li>
</ul>
</section>
<section id="useful-qa-resources" class="level2">
<h2 class="anchored" data-anchor-id="useful-qa-resources">Useful QA resources</h2>
<ul>
<li><a href="https://www.nao.org.uk/wp-content/uploads/2016/03/11018-002-Framework-to-review-models_External_4DP.pdf">Good practice guidance: Framework to review models (PDF)</a></li>
<li><a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/878616/Principles_of_QA_for_analysis.pdf">Principles of quality assurance for modelling and data analysis (PDF)</a></li>
<li><a href="https://assets.publishing.service.gov.uk/media/5a7f3bb8e5274a2e87db49be/aqua_book_final_web.pdf">The Aqua Book: guidance on producing quality analysis for government (PDF)</a></li>
<li><a href="https://assets.publishing.service.gov.uk/media/64e4cf0a4002ee000d560d5f/2023.02_GovS_010_Analysis_v2.1.pdf">Government Functional Standard (PDF)</a></li>
</ul>
</section>
<section id="tools-used-in-analysis" class="level2">
<h2 class="anchored" data-anchor-id="tools-used-in-analysis">Tools used in analysis</h2>
<p>Starting from the source tables, we want to create the agreed outputs. There are a range of tools we have at our disposal. Which tools are best will depend on the problem being tackled.</p>
<ul>
<li>R is especially suited to use for statistical analysis and visualisation and supports reproducible (Rmarkdown) and interactive (R Shiny) reports.</li>
<li>Python has most widespread support for training Artificial Intelligence Models and is more widely integrated with cloud-based platforms.</li>
<li>Power BI is a possible alternative to R Shiny for creating dashboards, but due to licensing may not be suitable for certain end users.</li>
<li>If it is appropriate, Excel and/or SQL can be used for generating simple summary statistics.</li>
</ul>
<p>Please see the internal Data Science Wiki for tips on how to use all of these tools.</p>
</section>
<section id="tips-for-effective-programming" class="level2">
<h2 class="anchored" data-anchor-id="tips-for-effective-programming">Tips for effective programming</h2>
<p>Data will be a factor in all initiatives. Most initiatives will also have some element of coding involved, even when using low-or-no-code tools like Power BI.</p>
<ul>
<li>Use Github to handle version control, issues and code reviews.</li>
<li>In Python, use object-oriented programming (OOP) if you can. Please see the internal Data Science Wiki for information.</li>
<li>Although R does have support for OOP, it is not a big paradigm like in Python.</li>
<li>Be careful of premature optimisation (called out by computer scientist Donald Knuth as ‘the root of all evil’ in software development).</li>
<li>Start small, such as limiting data to a manageable subset when developing the analysis; this makes it easier to spot issues and allows for faster iteration of code.</li>
<li>Check the data looks correct at each step of reshaping and transforming it; better still, know what it should be before writing and applying the step (the principle behind test driven development, TDD).</li>
<li>Work on one component of output at a time, for example using <code>shiny</code> with the modular <code>golem</code> framework, as in our <a href="https://github.com/nhsbsa-data-analytics/nhsbsaShinyR">shiny app template</a>.</li>
<li>Frequently run code as you write it, or check the output for low-or-no-code tools, so any issues are encountered early and their source is clearer.</li>
<li>You may produce multiple smaller data sets to be used in your outputs; the considerations applying to base tables apply equally to these.</li>
<li>Where appropriate, the final code should use RAP principles.</li>
</ul>
</section>
<section id="check-the-quality" class="level2">
<h2 class="anchored" data-anchor-id="check-the-quality">Check the quality</h2>
<p>As with data preparation, it is important to test and validate your results.</p>
<ul>
<li>Where possible, check results against other sources.</li>
<li>Other sources could be data from previous initiatives, Management Information dashboards or ePACT2.</li>
</ul>
<p>Additionally, you must be careful about visualising sensitive results. Please contact your Critical Friend or the Data Science Lead if you are unsure. Results for external audience or general public must be subjected to <a href="https://www.nhsbsa.nhs.uk/sites/default/files/2020-10/nhsbsa-sdc-protocol.pdf">Statistical Disclosure Control</a> before release.</p>
<p>Before pushing any code to GitHub, it’s essential to ensure that the output is cleared, and that no sensitive information remains within it.</p>
</section>
<section id="rap-considerations" class="level2">
<h2 class="anchored" data-anchor-id="rap-considerations">RAP considerations</h2>
<ul>
<li>It is worth spending time on making the data preparation easy to repeat.</li>
<li>Make sure the code is easy to maintain, read and re-run when required.</li>
<li>Rather than just doing adhoc testing, write formal tests that can be repeated.</li>
<li>Working in a RAP-ful way is especially important when the output of an initiative is to be refreshed periodically, such as monthly or annually.</li>
<li>Comment your code where its purpose is not obvious.</li>
<li>Maintain a clear project structure with clean scripts.</li>
<li>Separate data, scripts, and output into their own sub-directories.</li>
<li>Move custom functions into their own script.</li>
<li>Document your custom functions.</li>
</ul>
</section>
<section id="useful-rap-resources" class="level2">
<h2 class="anchored" data-anchor-id="useful-rap-resources">Useful RAP resources</h2>
<ul>
<li><a href="https://analysisfunction.civilservice.gov.uk/support/reproducible-analytical-pipelines/">Government Analysis Function</a></li>
<li><a href="https://nhsdigital.github.io/rap-community-of-practice/introduction_to_RAP/levels_of_RAP/">NHS RAP Community of Practice</a></li>
</ul>


</section>

</main> <!-- /main -->
<script>
  document.querySelectorAll('.callout-header').
    forEach(function(element){
      element.removeAttribute("aria-expanded");
    });
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/nhsbsa-data-analytics\.github\.io\/nhsbsa-data-science-playbook\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../../accessibility.html">
<p>Accessibility</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>